<?php // -*- mode: php; coding: euc-japan -*-
include_once $_SERVER['DOCUMENT_ROOT'].'/lib/ppa.php';
include_once $_SERVER['DOCUMENT_ROOT'].'/lib/enum.php';
include_once $_SERVER['DOCUMENT_ROOT'].'/lib/u/reception/admission-info.php';
$_lib_u_reception_admission_info_cfg = array
(
 'TABLE' => 'admission_info',
 'COLS' => array('´µ¼Ô', 'admitted_on', 'doctor',
		 'ward', 'ward_type', 'admission_type',
		 'admission_history', 'last_admission1', 'last_admission2',
		 'first_visit', 'referral', 'referred_by',
		 'estimated_duration', 'visiting', 'daycare', 'ot',
		 'home_visit', 'case_card', 'disease1', 'disease2',
		 'infection1', 'infection2', 'infection3', 'infection4',
		 'height', 'weight', 'history', 'written_by'),
 'ECOLS' => array(
		  array('Column' => 'admitted_on',
			'Label' => 'Æş±¡Æü',
			'Draw' => 'date',
			'Option' => array('ime' => 'disabled',
					  'validate' => 'date,nonnull'),
			),
		  array('Column' => 'doctor',
			'Label' => '¼ç¼£°å',
			'Enum' => _lib_u_test_get_doctors3(),
			'Draw' => 'enum'
			),
		  array('Column' => 'ward',
			'Label' => 'ÉÂÅï',
			'Enum' => mx_dbenum_patientgroup(),
			'Draw' => 'enum'
			),
		  array('Column' => 'ward_type',
			'Label' => 'ÉÂÅï·ÁÂÖ',
			'Draw' => 'radio',
			'Enum' => array(1 => '³«Êü',
					2 => 'ÊÄº¿',
					3 => '³ÖÎ¥')
			),
		  array('Column' => 'admission_type',
			'Label' => 'Æş±¡·ÁÂÖ',
			'Draw' => 'radio',
			'Enum' => array(1 => 'Ç¤°Õ',
					2 => '°åÊİ',
					3 => 'Á¼ÃÖ')
			),
		  array('Column' => 'admission_history',
			'Label' => 'Åö±¡Æş±¡Îò',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'last_admission1',
			'Label' => 'Á°²óÆş±¡Æü',
			'Draw' => 'date',
			'Option' => array('ime' => 'disabled',
					  'validate' => 'date',
					  'trailer' => '¤«¤é'),
			),
		  array('Column' => 'last_admission2',
			'Label' => 'Á°²óÂà±¡Æü',
			'Draw' => 'date',
			'Option' => array('ime' => 'disabled',
					  'validate' => 'date',
					  'trailer' => '¤Ş¤Ç'),
			),
		  array('Column' => 'first_visit',
			'Label' => '³°Íè½é¿ÇÆü',
			'Draw' => 'date',
			'Option' => array('ime' => 'disabled',
					  'validate' => 'date'),
			),
		  array('Column' => 'referral',
			'Label' => 'Â¾±¡¤«¤é¤Î¾Ò²ğ¾õ',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'referred_by',
			'Label' => '¾Ò²ğ¸µ¿ÇÎÅµ¡´Ø',
			),
		  array('Column' => 'estimated_duration',
			'Label' => 'Æş±¡¸«¹ş¤ß',
			'Option' => array('validate' => 'posint',
					  'trailer' => 'Æü',
					  ),
			),
		  array('Column' => 'visiting',
			'Label' => '³°ÍèÄÌ±¡',
			'Draw' => 'radio',
			'Enum' => array(1 => 'Äê´üÅª',
					2 => 'ÉÔµ¬Â§',
					3 => 'ÃæÃÇ',
					4 => '½é¿Ç',
					)
			),
		  array('Column' => 'daycare',
			'Label' => '¥Ç¥¤¥±¥¢»²²Ã',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'ot',
			'Label' => 'OT»²²Ã',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'home_visit',
			'Label' => 'Ë¬Ìä´Ç¸î',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'case_card',
			'Label' => '¥±¡¼¥¹¥«¡¼¥É',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'disease1',
			'Label' => 'ÉÂÌ¾',
			),
		  array('Column' => 'disease2',
			'Label' => '',
			),
		  array('Column' => 'infection1',
			'Label' => '´¶À÷¾É',
			),
		  array('Column' => 'infection2',
			'Label' => '',
			),
		  array('Column' => 'infection3',
			'Label' => '',
			),
		  array('Column' => 'infection4',
			'Label' => '',
			),
		  array('Column' => 'height',
			'Label' => '¿ÈÄ¹',
			'Option' => array('validate' => 'number',
					  'trailer' => 'cm')
			),
		  array('Column' => 'weight',
			'Label' => 'ÂÎ½Å',
			'Option' => array('validate' => 'number',
					  'trailer' => 'kg')
			),
		  array('Column' => 'history',
			'Label' => 'Æş±¡¤Ş¤Ç¤Î·Ğ²á',
			'Draw' => 'textarea',
			'Option' => array('rows' => 30,
					  'cols' => 60)
			),

		  array('Column' => 'written_by',
			'Label' => 'µ­ºÜ¼Ô',
			'Draw' => 'static'
			),
		  ),
'DCOLS' => array(
		  array('Column' => 'admitted_on',
			'Label' => 'Æş±¡Æü',
			'Draw' => 'date',
			'Option' => array('ime' => 'disabled',
					  'validate' => 'date,nonnull'),
			),
		  array('Column' => 'doctor',
			'Label' => '¼ç¼£°å',
			'Enum' => _lib_u_test_get_doctors2(),
			'Draw' => 'enum'
			),
		  array('Column' => 'ward',
			'Label' => 'ÉÂÅï',
			'Enum' => mx_dbenum_patientgroup(),
			'Draw' => 'enum'
			),
		  array('Column' => 'ward_type',
			'Label' => 'ÉÂÅï·ÁÂÖ',
			'Draw' => 'radio',
			'Enum' => array(1 => '³«Êü',
					2 => 'ÊÄº¿',
					3 => '³ÖÎ¥')
			),
		  array('Column' => 'admission_type',
			'Label' => 'Æş±¡·ÁÂÖ',
			'Draw' => 'radio',
			'Enum' => array(1 => 'Ç¤°Õ',
					2 => '°åÊİ',
					3 => 'Á¼ÃÖ')
			),
		  array('Column' => 'admission_history',
			'Label' => 'Åö±¡Æş±¡Îò',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'last_admission1',
			'Label' => 'Á°²óÆş±¡Æü',
			'Draw' => 'date',
			'Option' => array('ime' => 'disabled',
					  'validate' => 'date',
					  'trailer' => '¤«¤é'),
			),
		  array('Column' => 'last_admission2',
			'Label' => 'Á°²óÂà±¡Æü',
			'Draw' => 'date',
			'Option' => array('ime' => 'disabled',
					  'validate' => 'date',
					  'trailer' => '¤Ş¤Ç'),
			),
		  array('Column' => 'first_visit',
			'Label' => '³°Íè½é¿ÇÆü',
			'Draw' => 'date',
			'Option' => array('ime' => 'disabled',
					  'validate' => 'date'),
			),
		  array('Column' => 'referral',
			'Label' => 'Â¾±¡¤«¤é¤Î¾Ò²ğ¾õ',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'referred_by',
			'Label' => '¾Ò²ğ¸µ¿ÇÎÅµ¡´Ø',
			),
		  array('Column' => 'estimated_duration',
			'Label' => 'Æş±¡¸«¹ş¤ß',
			'Option' => array('validate' => 'posint',
					  'trailer' => 'Æü',
					  ),
			),
		  array('Column' => 'visiting',
			'Label' => '³°ÍèÄÌ±¡',
			'Draw' => 'radio',
			'Enum' => array(1 => 'Äê´üÅª',
					2 => 'ÉÔµ¬Â§',
					3 => 'ÃæÃÇ',
					4 => '½é¿Ç',
					)
			),
		  array('Column' => 'daycare',
			'Label' => '¥Ç¥¤¥±¥¢»²²Ã',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'ot',
			'Label' => 'OT»²²Ã',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'home_visit',
			'Label' => 'Ë¬Ìä´Ç¸î',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'case_card',
			'Label' => '¥±¡¼¥¹¥«¡¼¥É',
			'Draw' => 'radio',
			'Enum' => array(1 => '¤¢¤ê',
					2 => '¤Ê¤·')
			),
		  array('Column' => 'disease1',
			'Label' => 'ÉÂÌ¾',
			),
		  array('Column' => 'disease2',
			'Label' => '',
			),
		  array('Column' => 'infection1',
			'Label' => '´¶À÷¾É',
			),
		  array('Column' => 'infection2',
			'Label' => '',
			),
		  array('Column' => 'infection3',
			'Label' => '',
			),
		  array('Column' => 'infection4',
			'Label' => '',
			),
		  array('Column' => 'height',
			'Label' => '¿ÈÄ¹',
			'Option' => array('validate' => 'number',
					  'trailer' => 'cm')
			),
		  array('Column' => 'weight',
			'Label' => 'ÂÎ½Å',
			'Option' => array('validate' => 'number',
					  'trailer' => 'kg')
			),
		  array('Column' => 'history',
			'Label' => 'Æş±¡¤Ş¤Ç¤Î·Ğ²á',
			'Draw' => 'textarea',
			'Option' => array('rows' => 30,
					  'cols' => 60)
			),

		  array('Column' => 'written_by',
			'Label' => 'µ­ºÜ¼Ô',
			'Draw' => 'static'
			),
		  ),
 'LCOLS' => array(array('Column' => 'admitted_on',
			'Label' => 'Æş±¡Æü',
			),
		  array('Column' => 'ward',
			'Label' => 'ÉÂÅï',
			),
		  array('Column' => 'ward_type',
			'Label' => 'ÉÂÅï·ÁÂÖ',
			'Draw' => 'radio',
			'Enum' => array(1 => '³«Êü',
					2 => 'ÊÄº¿',
					3 => '³ÖÎ¥')
			),
		  array('Column' => 'admission_type',
			'Label' => 'Æş±¡·ÁÂÖ',
			'Draw' => 'radio',
			'Enum' => array(1 => 'Ç¤°Õ',
					2 => '°åÊİ',
					3 => 'Á¼ÃÖ')
			),
		  array('Column' => 'written_by',
			'Label' => 'µ­ºÜ¼Ô',
			),
		  ),
# 'D_TEMPLATE' => 'admission_info.html',
# 'E_TEMPLATE' => 'admission_info.html',
 'E_RANDOM_LAYOUT' => array
    (
     array('Column' => 'admitted_on',
	   'Label' => 'Æş±¡Æü',
	   ),
     array('Insn' => '//'),
     array('Column' => 'doctor',
	   'Label' => '¼ç¼£°å',
	   ),
     array('Insn' => '//'),
     array('Column' => 'ward',
	   'Label' => 'ÉÂÅï',
	   ),
     array('Insn' => '//'),
     array('Label' => 'ÉÂÅï·ÁÂÖ'),
     array('Column' => 'ward_type',
	   'Span' => 2
	   ),
     array('Insn' => '//'),
     array('Label' => 'Æş±¡·ÁÂÖ'),
     array('Column' => 'admission_type',
	   'Span' => 2
	   ),
     array('Insn' => '//'),
     array('Column' => 'admission_history',
	   'Label' => 'Åö±¡Æş±¡Îò',
	   ),
     array('Insn' => '//'),
     array('Label' => 'Á°²óÆş±¡Æü'),
     array('Column' => 'last_admission1'),
     array('Column' => 'last_admission2'),
     array('Insn' => '//'),
     array('Column' => 'first_visit',
	   'Label' => '³°Íè½é¿ÇÆü',
	   ),
     array('Insn' => '//'),
     array('Column' => 'referral',
	   'Label' => 'Â¾±¡¤«¤é¤Î¾Ò²ğ¾õ',
	   ),
     array('Insn' => '//'),
     array('Column' => 'referred_by',
	   'Label' => '¾Ò²ğ¸µ¿ÇÎÅµ¡´Ø',
	   ),
     array('Insn' => '//'),
     array('Column' => 'estimated_duration',
	   'Label' => 'Æş±¡¸«¹ş¤ßÆü¿ô',
	   ),
     array('Insn' => '//'),
     array('Label' => '³°ÍèÄÌ±¡'),
     array('Column' => 'visiting',
	   'Span' => 2
	   ),
     array('Insn' => '//'),
     array('Column' => 'daycare',
	   'Label' => '¥Ç¥¤¥±¥¢»²²Ã',
	   ),
     array('Insn' => '//'),
     array('Column' => 'ot',
	   'Label' => 'OT»²²Ã',
	   ),
     array('Insn' => '//'),
     array('Column' => 'home_visit',
	   'Label' => 'Ë¬Ìä´Ç¸î',
	   ),
     array('Insn' => '//'),
     array('Column' => 'case_card',
	   'Label' => '¥±¡¼¥¹¥«¡¼¥É',
	   ),
     array('Insn' => '//'),
     array('Column' => 'disease1',
	   'Label' => 'ÉÂÌ¾',
	   ),
     array('Insn' => '//'),
     array('Column' => 'disease2',
	   'Label' => ' '),
     array('Insn' => '//'),
     array('Column' => 'infection1',
	   'Label' => '´¶À÷¾É',
	   ),
     array('Insn' => '//'),
     array('Column' => 'infection2',
	   'Label' => ' '),
     array('Insn' => '//'),
     array('Column' => 'infection3',
	   'Label' => ' '),
     array('Insn' => '//'),
     array('Column' => 'infection4',
	   'Label' => ' '),
     array('Insn' => '//'),
     array('Column' => 'height',
	   'Label' => '¿ÈÄ¹',
	   ),
     array('Insn' => '//'),
     array('Column' => 'weight',
	   'Label' => 'ÂÎ½Å',
	   ),
     array('Insn' => '//'),
     array('Label' => 'Æş±¡¤Ş¤Ç¤Î·Ğ²á'),
     array('Column' => 'history',
	   'Span' => 2
	   ),
     array('Insn' => '//'),
     array('Column' => 'written_by',
	   'Label' => 'µ­ºÜ¼Ô',
	   ),
     ),
 );


$_lib_u_reception_admission_info_cfg['D_RANDOM_LAYOUT'] =
  $_lib_u_reception_admission_info_cfg['E_RANDOM_LAYOUT'];


class reception_admission_info_application extends per_patient_application {
  var $use_printer = 1;

  function print_sod() {
    $this->sod->print_sod();
  }

  function list_of_objects($prefix, &$it) {
    global $_lib_u_reception_admission_info_cfg;
    if (is_null($cfg)) $cfg = $_lib_u_reception_admission_info_cfg;
    $this->cfg_pt($cfg, $it);
    return new list_of_admissioninfos($prefix, $cfg);
  }

  function object_display($prefix, &$it) {
    global $_lib_u_reception_admission_info_cfg;
    if (is_null($cfg)) $cfg = $_lib_u_reception_admission_info_cfg;
    $this->cfg_pt($cfg, $it);
    return new admissioninfo_display($prefix, $cfg);
  }

  function object_edit($prefix, &$it) {
    global $_lib_u_reception_admission_info_cfg;
    if (is_null($cfg)) $cfg = $_lib_u_reception_admission_info_cfg;
    $this->cfg_pt($cfg, $it);
    $cfg['AUTH'] = $this->auth;
    return new admissioninfo_edit($prefix, $cfg);
  }
}
?>
